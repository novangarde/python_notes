
cProfile — это встроенный модуль в Python, который предназначен для профилирования кода, позволяя разработчикам анализировать производительность своих программ. Он предоставляет информацию о том, сколько времени затрачивается на выполнение различных функций и сколько раз они вызываются.

## Как работает cProfile

cProfile работает путем отслеживания вызовов функций и измерения времени, затраченного на их выполнение. Он собирает статистику о каждом вызове функции, включая:

- Общее количество вызовов.
- Время, затраченное на выполнение функции (tottime).
- Кумулятивное время, включая время, затраченное в дочерних функциях (cumtime).

Эта информация помогает выявить узкие места в коде и оптимизировать его.

#### Запуск

```shell
python3 -m cProfile <your_script.py>
```

#### Запуск с сортировкой по колонке

```Shell
python3 -m cProfile -s calls <your_script.py>
# calls - сортировка по количеству вызовов. Для сортировки можно выбрать любой другой столбец
```


#### Сортировка через pstats()

1. Добавляем модули в файл

```Python
import cProfile
import pstats
```

2. Создаем объект класса

```Python
profile = cProfile.Profile()
```

3. Включаем профилирование на время выполнения функции, затем выключаем

```Python
pr.enable()
main()  # Вызов вашей функции
pr.disable()
```

4. Или выводим статистику на экран:

```Python
profiler.print_stats()
```

5. Или сначала сохраняем дамп, чтобы как-то настроить вывод данных в pstats, а потом выводим:

```Python
profiler.dump_stats('output.prof')
profiler = pstats.Stats('output.prof') # загружаем из дампа
profiler.sort_stats('cumulative').print_stats(5) # сортируем по cumulative и печатаем пять строк
```
