
Модуль `subprocess` в Python предназначен для управления подпроцессами и выполнения внешних команд. Он предоставляет интерфейс для создания новых процессов, подключения к их стандартным потокам ввода/вывода/ошибок и получения кодов возврата этих процессов.

## Основные возможности модуля subprocess

1. **Создание новых процессов**: Модуль позволяет запускать внешние программы и команды операционной системы, что делает его полезным для автоматизации задач.
2. **Подключение к потокам**: Вы можете подключаться к стандартным потокам ввода, вывода и ошибок, что позволяет захватывать вывод команд и обрабатывать ошибки.
3. **Получение кодов возврата**: После выполнения команды можно получить код возврата, который указывает на успешность или неуспешность выполнения команды.

## Применение в виртуальном окружении

**Выполнить команду:**
```Python
subprocess.run([sys.executable, '-m', 'pip', 'install', '-r', 'requirements.txt'])
```

[[sys.executable]] вернет текущий интерпретатор, чтобы не вызвать команду в другом окружении
-m используется для указания интерпретатору Python, что необходимо запустить модуль как скрипт, то есть, pip

**Получить вывод:**
```Python
installed_packages = subprocess.check_output([sys.executable, '-m', 'pip', 'freeze']).decode('utf-8')
```

**Распечатать:**
```Python
print(installed_packages)
```

#### **`subprocess.run()`**

Рекомендуемый способ выполнения команд. Он запускает команду и ожидает её завершения, возвращая объект `CompletedProcess`, который содержит информацию о выполнении:

```Python
import subprocess
result = subprocess.run(['ls', '-l'])
print(result.returncode)  # Выводит код возврата
```

#### **`subprocess.call()`**

Выполняет команду и возвращает код возврата, но не предоставляет детальную информацию о выполнении:

```Python
return_code = subprocess.call(['ls', '-l'])
```

#### **`subprocess.Popen()`**

Более низкоуровневый интерфейс, который предоставляет больше контроля над процессами. С его помощью можно запускать процессы асинхронно и управлять их вводом/выводом:

```Python
process = subprocess.Popen(['ls', '-l'], stdout=subprocess.PIPE) output, errors = process.communicate()  # Получаем вывод и ошибки
```

#### `subprocess.check_call()

Используется для выполнения внешних команд и процессов. Она ожидает завершения команды и проверяет код возврата, поднимая исключение `CalledProcessError`, если код возврата не равен нулю.
